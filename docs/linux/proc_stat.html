

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Whats in /proc/stat &mdash; Bookmarks rc documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Networking" href="../networking/index.html" />
    <link rel="prev" title="Kernel Development" href="kerneldevel.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Bookmarks
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Linux</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="stickybits.html">SUID/GUID Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="kerneldevel.html">Kernel Development</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Whats in /proc/stat</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../networking/index.html">Networking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ruby/index.html">Ruby</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/index.html">Random Software</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Bookmarks</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Linux</a> &raquo;</li>
        
      <li>Whats in /proc/stat</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/linux/proc_stat.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="whats-in-proc-stat">
<span id="whats-in-proc-stat"></span><h1>Whats in /proc/stat<a class="headerlink" href="#whats-in-proc-stat" title="Permalink to this headline">¶</a></h1>
<p>A few people have done a deeper look into this than I will here but this is just a brief
overview to get you up to speed or refresh yourself. I’ll link to some much longer posts
about this at the end.</p>
<p>To start with lets see what is even in /proc/stat. Here is the output of running cat against
this file on my laptop running the 4.14.65 linux kernel.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>eatingthenight@gentoo ~/code/github/bookmarks/source/linux $ cat /proc/stat
cpu  7798454 53129 2254926 19957379 39462 0 6215 0 0 0
cpu0 806091 4325 553814 17936535 37368 0 6215 0 0 0
cpu1 927471 5940 286162 288832 907 0 0 0 0 0
cpu2 1055639 5295 271513 288135 140 0 0 0 0 0
cpu3 1091193 6518 258477 287561 217 0 0 0 0 0
cpu4 1043412 7691 244229 287986 90 0 0 0 0 0
cpu5 976146 8332 220455 288344 485 0 0 0 0 0
cpu6 955370 7495 211697 289516 118 0 0 0 0 0
cpu7 943128 7528 208575 290466 134 0 0 0 0 0
intr 520703432 78 111351 0 0 0 0 0 0 64 395550 0 0 36633262 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 4934 13184 0 111 1737 2674 1960 1643 1415 1657 2055 4795762 1290955 4 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
ctxt 1097197802
btime 1542001131
processes 1259622
procs_running 2
procs_blocked 0
softirq 308948893 1466144 247063393 238 164781 96944 56 155683 57729916 0 2271738
</pre></div>
</div>
<p>Lets first take a look at the most common section of this which is the first eight lines. This has
been cleaned up and given column names to make it more readable for humans. If you are unfamiliar
with the column names have a look <a class="reference external" href="https://www.opsdash.com/blog/cpu-usage-linux.html">here</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>     <span class="n">user</span>    <span class="n">nice</span>  <span class="n">system</span>  <span class="n">idle</span>     <span class="n">iowait</span>  <span class="n">irq</span>  <span class="n">softirq</span> <span class="n">steal</span> <span class="n">guest</span> <span class="n">guest_nice</span>
<span class="n">cpu</span>  <span class="mi">7798454</span> <span class="mi">53129</span> <span class="mi">2254926</span> <span class="mi">19957379</span> <span class="mi">39462</span>   <span class="mi">0</span>    <span class="mi">6215</span>    <span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>
<span class="n">cpu0</span> <span class="mi">806091</span>  <span class="mi">4325</span>  <span class="mi">553814</span>  <span class="mi">17936535</span> <span class="mi">37368</span>   <span class="mi">0</span>    <span class="mi">6215</span>    <span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>
<span class="n">cpu1</span> <span class="mi">927471</span>  <span class="mi">5940</span>  <span class="mi">286162</span>  <span class="mi">288832</span>   <span class="mi">907</span>     <span class="mi">0</span>    <span class="mi">0</span>       <span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>
<span class="n">cpu2</span> <span class="mi">1055639</span> <span class="mi">5295</span>  <span class="mi">271513</span>  <span class="mi">288135</span>   <span class="mi">140</span>     <span class="mi">0</span>    <span class="mi">0</span>       <span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>
<span class="n">cpu3</span> <span class="mi">1091193</span> <span class="mi">6518</span>  <span class="mi">258477</span>  <span class="mi">287561</span>   <span class="mi">217</span>     <span class="mi">0</span>    <span class="mi">0</span>       <span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>
<span class="n">cpu4</span> <span class="mi">1043412</span> <span class="mi">7691</span>  <span class="mi">244229</span>  <span class="mi">287986</span>   <span class="mi">90</span>      <span class="mi">0</span>    <span class="mi">0</span>       <span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>
<span class="n">cpu5</span> <span class="mi">976146</span>  <span class="mi">8332</span>  <span class="mi">220455</span>  <span class="mi">288344</span>   <span class="mi">485</span>     <span class="mi">0</span>    <span class="mi">0</span>       <span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>
<span class="n">cpu6</span> <span class="mi">955370</span>  <span class="mi">7495</span>  <span class="mi">211697</span>  <span class="mi">289516</span>   <span class="mi">118</span>     <span class="mi">0</span>    <span class="mi">0</span>       <span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>
<span class="n">cpu7</span> <span class="mi">943128</span>  <span class="mi">7528</span>  <span class="mi">208575</span>  <span class="mi">290466</span>   <span class="mi">134</span>     <span class="mi">0</span>    <span class="mi">0</span>       <span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>
</pre></div>
</div>
<p>Given the above we can now compute the CPU utlization for a given period of time. To do so you would add up
everything except guest and guest_nice since they are already included in user and nice. Then we add up the
time spent in idle and <a class="reference external" href="https://witekio.com/blog/understanding-io-wait-0-idle-can-ok/">iowait</a> to find out how much time the CPU spent doing “nothing”. Pretending for
now that I only have one CPU we can calulate the following…</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">total</span> <span class="o">=</span> <span class="mi">7798454</span> <span class="o">+</span> <span class="mi">53129</span> <span class="o">+</span> <span class="mi">2254926</span> <span class="o">+</span> <span class="mi">19957379</span> <span class="o">+</span> <span class="mi">39462</span> <span class="o">+</span> <span class="mi">6215</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">idle</span> <span class="o">=</span> <span class="mi">19957379</span> <span class="o">+</span> <span class="mi">39462</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">total</span> <span class="o">-</span> <span class="n">idle</span><span class="p">)</span> <span class="o">/</span> <span class="n">total</span> 
<span class="go">0.33586416808080755</span>
</pre></div>
</div>
<p>Which shows that for my first core it’s being utlized ~33% of the time. However if I wanted to find my
utilization I could do the following. Which is just a small python script to add up multiple cores and
determine what percent of the time you have not been in the idle state since last time you booted.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>

<span class="kn">import</span> <span class="nn">re</span>

<span class="n">cpu_info</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># Read proc stat and extract the lines we care about.</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;/proc/stat&quot;</span><span class="p">,</span><span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">ps</span><span class="p">:</span>
  <span class="n">pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;^cpu[0-9]*\s&quot;</span><span class="p">)</span>
  <span class="n">stats</span> <span class="o">=</span> <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">ps</span> <span class="k">if</span> <span class="n">pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">line</span><span class="p">)]</span>
  <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">stats</span><span class="p">:</span>
    <span class="n">cpu_info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">1</span><span class="p">:])</span>

<span class="n">user_ticks</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">nice_ticks</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">system_ticks</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">idle_ticks</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">iowait_ticks</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">irq_ticks</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">softirq_ticks</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">steal_ticks</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">cpu_info</span><span class="p">:</span>
  <span class="n">user_ticks</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
  <span class="n">nice_ticks</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
  <span class="n">system_ticks</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
  <span class="n">idle_ticks</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
  <span class="n">iowait_ticks</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
  <span class="n">irq_ticks</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
  <span class="n">softirq_ticks</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="mi">6</span><span class="p">])</span>
  <span class="n">steal_ticks</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="mi">7</span><span class="p">])</span>

<span class="c1"># Output utilization since last boot.</span>
<span class="n">total</span> <span class="o">=</span> <span class="n">user_ticks</span> <span class="o">+</span> <span class="n">nice_ticks</span> <span class="o">+</span> <span class="n">system_ticks</span> <span class="o">+</span> <span class="n">idle_ticks</span> <span class="o">+</span> \
  <span class="n">iowait_ticks</span> <span class="o">+</span> <span class="n">irq_ticks</span> <span class="o">+</span> <span class="n">softirq_ticks</span> <span class="o">+</span> <span class="n">steal_ticks</span>

<span class="n">wait</span> <span class="o">=</span> <span class="n">idle_ticks</span> <span class="o">+</span> <span class="n">iowait_ticks</span>

<span class="n">percent</span> <span class="o">=</span> <span class="p">(</span><span class="n">total</span> <span class="o">-</span> <span class="n">wait</span><span class="p">)</span> <span class="o">/</span> <span class="n">total</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Percent Utilized: </span><span class="si">{}</span><span class="s2">%&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">percent</span> <span class="o">*</span> <span class="mi">100</span><span class="p">))</span>
</pre></div>
</div>
<p>By running this in a loop you could also determine your utilization over the last X amount of time.
Which would look like so and gives you a nice stream of CPU utilization second by second.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>

<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="c1"># Read proc stat and extract the lines we care about.</span>

<span class="n">last_total</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">last_wait</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
  <span class="n">cpu_info</span> <span class="o">=</span> <span class="p">[]</span>

  <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;/proc/stat&quot;</span><span class="p">,</span><span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">ps</span><span class="p">:</span>
    <span class="n">pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;^cpu[0-9]*\s&quot;</span><span class="p">)</span>
    <span class="n">stats</span> <span class="o">=</span> <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">ps</span> <span class="k">if</span> <span class="n">pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">line</span><span class="p">)]</span>
    <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">stats</span><span class="p">:</span>
      <span class="n">cpu_info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">1</span><span class="p">:])</span>
  
  <span class="n">user_ticks</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="n">nice_ticks</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="n">system_ticks</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="n">idle_ticks</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="n">iowait_ticks</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="n">irq_ticks</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="n">softirq_ticks</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="n">steal_ticks</span> <span class="o">=</span> <span class="mi">0</span>
  
  <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">cpu_info</span><span class="p">:</span>
    <span class="n">user_ticks</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">nice_ticks</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">system_ticks</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">idle_ticks</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
    <span class="n">iowait_ticks</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
    <span class="n">irq_ticks</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
    <span class="n">softirq_ticks</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="mi">6</span><span class="p">])</span>
    <span class="n">steal_ticks</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="mi">7</span><span class="p">])</span>
  
  <span class="n">total</span> <span class="o">=</span> <span class="n">user_ticks</span> <span class="o">+</span> <span class="n">nice_ticks</span> <span class="o">+</span> <span class="n">system_ticks</span> <span class="o">+</span> <span class="n">idle_ticks</span> <span class="o">+</span> \
    <span class="n">iowait_ticks</span> <span class="o">+</span> <span class="n">irq_ticks</span> <span class="o">+</span> <span class="n">softirq_ticks</span> <span class="o">+</span> <span class="n">steal_ticks</span>
  <span class="n">wait</span> <span class="o">=</span> <span class="n">idle_ticks</span> <span class="o">+</span> <span class="n">iowait_ticks</span>

  <span class="n">diff_total</span> <span class="o">=</span> <span class="n">total</span> <span class="o">-</span> <span class="n">last_total</span>
  <span class="n">diff_wait</span> <span class="o">=</span> <span class="n">wait</span> <span class="o">-</span> <span class="n">last_wait</span>
  <span class="n">percent</span> <span class="o">=</span> <span class="p">(</span><span class="n">diff_total</span> <span class="o">-</span> <span class="n">diff_wait</span><span class="p">)</span> <span class="o">/</span> <span class="n">diff_total</span>
  
  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Percent Utilized :</span><span class="si">{}</span><span class="s2">%&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">percent</span> <span class="o">*</span> <span class="mi">100</span><span class="p">))</span>
  
  <span class="n">last_total</span> <span class="o">=</span> <span class="n">total</span>
  <span class="n">last_wait</span> <span class="o">=</span> <span class="n">wait</span>
  <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../networking/index.html" class="btn btn-neutral float-right" title="Networking" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="kerneldevel.html" class="btn btn-neutral" title="Kernel Development" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Michael Schuett.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'rc',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>